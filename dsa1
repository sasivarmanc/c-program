#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// Function to generate the next sequence
char* countAndSay(int n) {
    if (n == 1) {
        return "1";
    }

    char *result = (char*)malloc(5000 * sizeof(char));  // Allocate memory for result
    strcpy(result, "1");

    for (int i = 1; i < n; i++) {
        char *current = (char*)malloc(5000 * sizeof(char));
        strcpy(current, result);
        int len = strlen(current);
        int count = 1;
        int index = 0;

        for (int j = 1; j < len; j++) {
            if (current[j] == current[j - 1]) {
                count++;
            } else {
                index += sprintf(&result[index], "%d%c", count, current[j - 1]);
                count = 1;
            }
        }
        
        // Append the last count and character
        index += sprintf(&result[index], "%d%c", count, current[len - 1]);
        free(current); // Free allocated memory
    }

    return result;
}

int main() {
    int n;
    printf("Enter n: ");
    scanf("%d", &n);
    char* result = countAndSay(n);
    printf("Count and Say Sequence at n = %d: %s\n", n, result);
    free(result); // Free allocated memory
    return 0;
}
